(()=>{"use strict";class n{}n.getStorage=n=>new Promise((t=>{chrome.storage.sync.get([n],(e=>{t(e[n]?JSON.parse(e[n]):null)}))})),n.setStorage=(n,t)=>{return e=void 0,i=void 0,c=function*(){return chrome.storage.sync.set({[n]:JSON.stringify(t)})},new((o=void 0)||(o=Promise))((function(n,t){function r(n){try{a(c.next(n))}catch(n){t(n)}}function s(n){try{a(c.throw(n))}catch(n){t(n)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o((function(n){n(e)}))).then(r,s)}a((c=c.apply(e,i||[])).next())}));var e,i,o,c};var t,e=function(n,t,e,i){return new(e||(e=Promise))((function(o,c){function r(n){try{a(i.next(n))}catch(n){c(n)}}function s(n){try{a(i.throw(n))}catch(n){c(n)}}function a(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(r,s)}a((i=i.apply(n,t||[])).next())}))};class i{constructor(){this.config={},this.isInit=!1,this.init=()=>e(this,void 0,void 0,(function*(){if(this.isInit)return;const t=yield n.getStorage("inflearn-extra-config"),e=document.querySelectorAll("li input");for(const n of e){const e=n.id;this.config[e]=null===t||t[e],n.checked=this.config[e],n.addEventListener("click",(()=>{this.config[e]=!this.config[e],this.updateConfig()}))}n.setStorage("inflearn-extra-config",this.config)})),this.updateConfig=()=>{const t=document.querySelectorAll("li input");for(const n of t){const t=n.id;this.config[t]=n.checked,n.checked=this.config[t]}n.setStorage("inflearn-extra-config",this.config)}}}t=i,i.getInstance=()=>(t.instance||(t.instance=new i),t.instance),document.addEventListener("DOMContentLoaded",(()=>e(void 0,void 0,void 0,(function*(){(yield chrome.tabs.query({currentWindow:!0,active:!0}))[0],i.getInstance().init()}))))})();