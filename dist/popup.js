(()=>{"use strict";var t,n=function(t,n,i,e){return new(i||(i=Promise))((function(o,c){function s(t){try{f(e.next(t))}catch(t){c(t)}}function r(t){try{f(e.throw(t))}catch(t){c(t)}}function f(t){var n;t.done?o(t.value):(n=t.value,n instanceof i?n:new i((function(t){t(n)}))).then(s,r)}f((e=e.apply(t,n||[])).next())}))};class i{constructor(){this.getStorage=t=>new Promise((n=>{chrome.storage.sync.get([t],(i=>{n(i[t]?JSON.parse(i[t]):null)}))})),this.setStorage=(t,i)=>n(this,void 0,void 0,(function*(){return chrome.storage.sync.set({[t]:JSON.stringify(i)})})),this.getConfig=()=>n(this,void 0,void 0,(function*(){return this.getStorage("inflearn-extra-config")})),this.setConfig=t=>n(this,void 0,void 0,(function*(){yield this.setStorage("inflearn-extra-config",t)}))}}t=i,i.getInstance=()=>(t.instance||(t.instance=new i),t.instance);var e,o=function(t,n,i,e){return new(i||(i=Promise))((function(o,c){function s(t){try{f(e.next(t))}catch(t){c(t)}}function r(t){try{f(e.throw(t))}catch(t){c(t)}}function f(t){var n;t.done?o(t.value):(n=t.value,n instanceof i?n:new i((function(t){t(n)}))).then(s,r)}f((e=e.apply(t,n||[])).next())}))};class c{constructor(t){this.configRepo=t,this.config={},this.isInit=!1,this.init=()=>o(this,void 0,void 0,(function*(){if(this.isInit)return;const t=yield this.configRepo.getConfig(),n=document.querySelectorAll("li input");for(const i of n){const n=i.id;this.config[n]=null===t||t[n],i.checked=this.config[n],i.addEventListener("click",(()=>{this.config[n]=!this.config[n],this.updateConfig()}))}this.configRepo.setConfig(this.config)})),this.updateConfig=()=>{const t=document.querySelectorAll("li input");for(const n of t){const t=n.id;this.config[t]=n.checked,n.checked=this.config[t]}this.configRepo.setConfig(this.config)}}}e=c,c.getInstance=t=>(e.instance||(e.instance=new c(t)),e.instance),document.addEventListener("DOMContentLoaded",(()=>o(void 0,void 0,void 0,(function*(){(yield chrome.tabs.query({currentWindow:!0,active:!0}))[0],c.getInstance(i.getInstance()).init()}))))})();